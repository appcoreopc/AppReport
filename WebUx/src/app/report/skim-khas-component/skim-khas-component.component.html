<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
 crossorigin="anonymous">

<div class="container">

	<p-dialog id="formAction" header="{{formTitle}}" [(visible)]="display" modal='true'>

		<p-tabView>

			<p-tabPanel header="Basic Entry">

				<form [formGroup]='dataForm'>

					<div style="width:1000px;padding:0px">

						<div class="panel panel-info">
							<div class="panel-body" style="padding:5px; padding-left:30px">


								<div class="form-group row">
									<div class="cell c1">
										<label for="refNo">Reference No :</label>
									</div>
									<div class="cell c2">
										<input id="refNo" type="text" class="form-control text-control" formControlName="refNo" />
									</div>
									<div class="cell c3">
									</div>
									<div class="cell c4">
										<label for="letterDate">Date of Letter :</label>
									</div>
									<div class="cell c5">
										<p-calendar dateFormat="dd/mm/yy" formControlName="letterDate" [showIcon]="true" [monthNavigator]="true"></p-calendar>
										<div *ngIf="formErrors.letterDate" class="alert alert-danger">
											{{ formErrors.letterDate }}
										</div>
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="rptDate">Report Month/Year :</label>
									</div>
									<div class="cell c2">
										<p-calendar dateFormat="M yy" formControlName="rptDate" showIcon="true"></p-calendar>
										<div *ngIf="formErrors.rptDate" class="alert alert-danger">
											{{ formErrors.rptDate }}
										</div>
									</div>
									<div class="cell c3">
									</div>
									<div class="cell c4">
									</div>
									<div class="cell c5">
									</div>
								</div>



								<div class="form-group row" style="padding-top:20px">
									<b>Recipient</b>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptDept">Department :</label>
									</div>
									<div class="cell c2345">
										<input id="LRcptDept" type="text" class="form-control text-control" formControlName="lrcptDept" />
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptBr">Branch :</label>
									</div>
									<div class="cell c2345">
										<input id="LRcptBr" type="text" class="form-control text-control" formControlName="lrcptBr" />
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptAdd1">Address :</label>
									</div>
									<div class="cell c2345">
										<input id="LRcptAdd1" type="text" class="form-control text-control" formControlName="lrcptAdd1" />
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptAdd2"></label>
									</div>
									<div class="cell c2345">
										<input id="LRcptAdd2" type="text" class="form-control text-control" formControlName="lrcptAdd2" />
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptAdd3"></label>
									</div>
									<div class="cell c2345">
										<input id="LRcptAdd3" type="text" class="form-control text-control" formControlName="lrcptAdd3" />
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="LRcptAdd4"></label>
									</div>
									<div class="cell c2345">
										<input id="LRcptAdd4" type="text" class="form-control text-control" formControlName="lrcptAdd4" />
									</div>
								</div>


								<div class="form-group row" style="padding-top:20px">
									<b>Signed By</b>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="signedByEmpId">Employee :</label>
									</div>
									<div class="cell c2345">
										<select class="form-control" formControlName="signedByEmpId" style="width:300px">
											<option *ngFor="let obj of empRows" [value]="obj.empId">{{obj.empName}}</option>
										</select>
									</div>
								</div>
								<div class="form-group row">
									<div class="cell c1">
										<label for="SignedByName">Name :</label>
									</div>
									<div class="cell c2345">
										<input id="SignedByName" type="text" class="form-control text-control" formControlName="signedByName" />
									</div>
								</div>


								<div class="form-group row">
									<div class="cell c1">
										<label for="icno">IC
											<Noscript></Noscript> :</label>
									</div>
									<div class="cell c2345">
										<input id="icno" type="text" class="form-control text-control" formControlName="signedByIdno" />
									</div>
								</div>

								<div class="form-group row">
									<div class="cell c1">
										<label for="SignedByPos">Position :</label>
									</div>
									<div class="cell c2345">
										<input id="SignedByPos" type="text" class="form-control text-control" formControlName="signedByPos" />
									</div>
								</div>
							</div>



						</div>

						<div class="form-group row">
							<div class="cell c1">
							</div>
							<div class="cell c2">
							</div>
							<div class="cell c3">
							</div>
							<div class="cell c4">
							</div>
							<div class="cell c5">

								<p-button icon="fa fa-fw fa-save" label="Save" [disabled]="!dataForm.valid" (click)="save()"></p-button>
							</div>
						</div>

						<p>Form value: {{ dataForm.value | json }}</p>

					</div>


				</form>

			</p-tabPanel>

			<p-tabPanel header="Detail Entry">

				<p-table [columns]="dataEntryColumns" [value]="data.rptSkMimp" [paginator]="true" [rows]="10" dataKey="txnId" (onRowSelect)="onRowSelect($event)">

					<ng-template pTemplate="header" let-dataEntryColumns>
						<tr>
							<th style="width: 2.25em"></th>
							<th *ngFor="let col of dataEntryColumns">
								{{col.header}}
							</th>
						</tr>
					</ng-template>

					<ng-template pTemplate="caption">

						<form [formGroup]='entryDetailForm'>

							<div style="width:1000px;padding:0px">
								<div class="panel panel-info">
									<div class="panel-body" style="padding:5px; padding-left:30px">

										<div class="form-group row">
											<div class="cell c1">
												<label for="taxid">Bill</label>
											</div>
											<div class="cell c2345">
												<input id="taxid" type="number" formControlName="txnId" class="form-control text-control" />
											</div>
										</div>
										<div class="form-group row">
											<div class="cell c1">
												<label for="tarikh">Tarikh</label>
											</div>
											<div class="cell c2345">
												<input id="tarikh" type="text" formControlName="fImpDate" class="form-control text-control" />
											</div>
										</div>
										<div class="form-group row">
											<div class="cell c1">
												<label for="nobarang">No Barang</label>
											</div>
											<div class="cell c2345">
												<input id="nobarang" type="text" formControlName="fCustomNo" class="form-control text-control" />
											</div>
										</div>

										<div class="form-group row">
											<div class="cell c1">
												<label for="kuantitiImport">Kuantiti Import</label>
											</div>
											<div class="cell c2345">
												<input id="kuantitiImport" type="number" formControlName="fImpWgt" class="form-control text-control" />
											</div>

											<div *ngIf="detailFormError.fImpWgt" class="alert alert-danger">
												{{ detailFormError.fImpWgt }}
											</div>
										</div>

										<div class="form-group row">
											<div class="cell c1">
												<label for="nilaiImport">Nilai Import</label>
											</div>
											<div class="cell c2345">
												<input id="nilaiImport" type="number" formControlName="fImpCost" class="form-control text-control" />
											</div>
										</div>


										<div class="form-group row">
											<div class="cell c1">
												<label for="nilaiImport">GST </label>
											</div>
											<div class="cell c2345">
												<input id="nilaiImport" type="number" formControlName="fGstcost" class="form-control text-control" />
											</div>
										</div>

										<div class="form-group row">
											<div class="cell c1">
												<label for="catatan">Catatan</label>
											</div>
											<div class="cell c2345">
												<input id="catatan" type="text" formControlName="note" class="form-control text-control" />
											</div>

											<div *ngIf="detailFormError.note" class="alert alert-danger">
												{{ detailFormError.note }}
											</div>
										</div>

										<div class="form-group row">
												<div class="cell c1">													
												</div>
												<div class="cell c2345">
												<p-button icon="fa fa-fw fa-save" label="Create Entry" [disabled]="!entryDetailForm.valid" (click)="createEntry()">															
														</p-button>
												</div>	
										</div>

										<div>
											<p>Form value: {{ entryDetailForm.value | json }}</p>
										</div>


									</div>
								</div>
							</div>
						</form>

					</ng-template>


					<ng-template pTemplate="body" let-rowData let-columns="columns" let-expanded="expanded" columns="columns">
						<tr>
							<td>
								<div [pRowToggler]="rowData">
									<i [ngClass]="expanded ? 'fa fa-fw fa-chevron-circle-down' : 'fa fa-fw fa-chevron-circle-right'"></i>
								</div>
							</td>

							<td *ngFor="let col of columns">
								{{rowData[col.field]}}
							</td>
						</tr>

					</ng-template>


					<ng-template pTemplate="rowexpansion" let-rowData let-columns="columns">

						<tr>
							<td [attr.colspan]="columns.length + 1">

								<div style="width:1000px;padding:0px">
									<div class="panel panel-info">
										<div class="panel-body" style="padding:5px; padding-left:30px">

											<div class="form-group row">
												<div class="cell c1">
													<label for="txnId">Bill</label>
												</div>
												<div class="cell c2345">
													<input id="txnId" type="text" value="{{rowData.txnId}}" class="form-control text-control" />
												</div>
											</div>
											<div class="form-group row">
												<div class="cell c1">
													<label for="tarikh">Tarikh</label>
												</div>
												<div class="cell c2345">
													<input id="tarikh" type="text" value="{{rowData.fImpDate}}" class="form-control text-control" />
												</div>
											</div>
											<div class="form-group row">
												<div class="cell c1">
													<label for="nobarang">No Barang</label>
												</div>
												<div class="cell c2345">
													<input id="nobarang" value="{{rowData.fCustomNo}}" type="text" class="form-control text-control" />
												</div>
											</div>

											<div class="form-group row">
												<div class="cell c1">
													<label for="kuantitiImport">Kuantiti Import</label>
												</div>
												<div class="cell c2345">
													<input id="kuantitiImport" value="{{rowData.fCustomNo}}" type="text" class="form-control text-control" />
												</div>
											</div>

											<div class="form-group row">
												<div class="cell c1">
													<label for="nilaiImport">Nilai Import</label>
												</div>
												<div class="cell c2345">
													<input id="nilaiImport" value="{{rowData.fImpCost}}" type="text" class="form-control text-control" />
												</div>
											</div>

											<div class="form-group row">
												<div class="cell c1">
													<label for="catatan">Catatan</label>
												</div>
												<div class="cell c2345">
													<input id="catatan" type="text" value="{{rowData.note}}" class="form-control text-control" />
												</div>
											</div>


										</div>
									</div>
								</div>


							</td>
						</tr>

					</ng-template>

				</p-table>

				<div>

					<div>

						<p>Form value: {{ dataForm.value | json }}</p>
					</div>

				</div>

				<div class="container">

					<p-button icon="fa fa-fw fa-plus" label="Save Skim Khas" (click)="save()"></p-button>
				</div>


			</p-tabPanel>

		</p-tabView>

	</p-dialog>

</div>

<div class="container">
	<p-button (onClick)="addForm()" icon="fa fa-fw fa-plus" label="Add"></p-button>

	<p-dialog id="formAction" header="{{formTitle}}" [(visible)]="displayDataEntry" modal='true'>


	</p-dialog>
</div>


<div style="clear:both; height:10px"></div>


<div class="container">

	<p-table [columns]="mainColumns" [value]="rows" selectionMode="single" [paginator]="true" [rows]="10" (onRowSelect)="onRowSelect($event)">

		<ng-template pTemplate="header" let-dataEntryColumns>
			<tr>
				<th *ngFor="let col of dataEntryColumns">
					{{col.header}}
				</th>
			</tr>
		</ng-template>

		<ng-template pTemplate="body" let-rowData let-columns="columns" let-expanded="expanded" columns="columns">
			<tr [pSelectableRow]="rowData">
				<td *ngFor="let col of columns">
					{{rowData[col.field]}}
				</td>
			</tr>
		</ng-template>

	</p-table>



</div>